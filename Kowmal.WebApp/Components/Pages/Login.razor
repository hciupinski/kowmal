@page "/login"
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider
@rendermode InteractiveServer

<h3>Login</h3>
@if (!context.User.Identity?.IsAuthenticated ?? false)
{
    <button @onclick="LoginWithGoogle">Login with Google</button>
}
else
{
    <p>You are already logged in.</p>
}

@code {
    private async Task LoginWithGoogle()
    {
        Navigation.NavigateTo("authentication/google", true);
    }

    [CascadingParameter]
    private Task<AuthenticationState> authenticationStateTask { get; set; }

    private AuthenticationState context;

    protected override async Task OnInitializedAsync()
    {
        context = await AuthenticationStateProvider.GetAuthenticationStateAsync();
    }
}